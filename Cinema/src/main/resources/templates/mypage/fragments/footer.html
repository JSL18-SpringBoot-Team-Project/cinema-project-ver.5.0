<div th:fragment="footer">
  <!-- prs footer Wrapper Start -->
  <footer class="bg-light text-dark py-5">
    <div class="container">
      <div class="row">
        <!-- LANGUAGE MOVIES -->
        <div class="col-lg-3 col-md-6 mb-4">
          <h5>LANGUAGE MOVIES</h5>
          <ul class="list-unstyled">
            <li><i class="fa fa-circle text-primary"></i> <a href="#" class="text-decoration-none">English movie</a></li>
            <li><i class="fa fa-circle text-primary"></i> <a href="#" class="text-decoration-none">Tamil movie</a></li>
            <li><i class="fa fa-circle text-primary"></i> <a href="#" class="text-decoration-none">Punjabi Movie</a></li>
            <li><i class="fa fa-circle text-primary"></i> <a href="#" class="text-decoration-none">Hindi movie</a></li>
            <li><i class="fa fa-circle text-primary"></i> <a href="#" class="text-decoration-none">Malyalam movie</a></li>
            <li><i class="fa fa-circle text-primary"></i> <a href="#" class="text-decoration-none">English Action movie</a></li>
            <li><i class="fa fa-circle text-primary"></i> <a href="#" class="text-decoration-none">Hindi Action movie</a></li>
          </ul>
        </div>

        <!-- MOVIES by presenter -->
        <div class="col-lg-3 col-md-6 mb-4">
          <h5>MOVIES by presenter</h5>
          <ul class="list-unstyled">
            <li><i class="fa fa-circle text-primary"></i> <a href="#" class="text-decoration-none">Action movie</a></li>
            <li><i class="fa fa-circle text-primary"></i> <a href="#" class="text-decoration-none">Romantic movie</a></li>
            <li><i class="fa fa-circle text-primary"></i> <a href="#" class="text-decoration-none">Adult movie</a></li>
            <li><i class="fa fa-circle text-primary"></i> <a href="#" class="text-decoration-none">Comedy movie</a></li>
            <li><i class="fa fa-circle text-primary"></i> <a href="#" class="text-decoration-none">Drama movie</a></li>
            <li><i class="fa fa-circle text-primary"></i> <a href="#" class="text-decoration-none">Musical movie</a></li>
            <li><i class="fa fa-circle text-primary"></i> <a href="#" class="text-decoration-none">Classical movie</a></li>
          </ul>
        </div>

        <!-- BOOKING ONLINE -->
        <div class="col-lg-3 col-md-6 mb-4">
          <h5>BOOKING ONLINE</h5>
          <ul class="list-unstyled">
            <li><i class="fa fa-circle text-primary"></i> <a href="#" class="text-decoration-none">www.example.com</a></li>
            <li><i class="fa fa-circle text-primary"></i> <a href="#" class="text-decoration-none">www.hello.com</a></li>
            <li><i class="fa fa-circle text-primary"></i> <a href="#" class="text-decoration-none">www.example.com</a></li>
            <li><i class="fa fa-circle text-primary"></i> <a href="#" class="text-decoration-none">www.hello.com</a></li>
            <li><i class="fa fa-circle text-primary"></i> <a href="#" class="text-decoration-none">www.example.com</a></li>
            <li><i class="fa fa-circle text-primary"></i> <a href="#" class="text-decoration-none">www.hello.com</a></li>
            <li><i class="fa fa-circle text-primary"></i> <a href="#" class="text-decoration-none">www.example.com</a></li>
          </ul>
        </div>

        <!-- App available on -->
        <div class="col-lg-3 col-md-6 mb-4">
          <h5>App available on</h5>
          <p>Download App and Get Free Movie Ticket!</p>
          <div class="d-flex gap-2">
            <a href="#"><img src="/images/content/f1.jpg" alt="footer_img" class="img-fluid"></a>
            <a href="#"><img src="/images/content/f2.jpg" alt="footer_img" class="img-fluid"></a>
          </div>
          <h5 class="mt-3"><span class="text-primary">$50</span> Payback on App Download</h5>
        </div>
      </div>

      <div class="border-top pt-3 mt-4 text-center">
        <p>&copy; 2020-21 <a href="#" class="text-decoration-none">Movie Pro</a>. All rights reserved - Design by <a href="#" class="text-decoration-none">Webstrot</a></p>
        <ul class="list-inline mt-2">
          <li class="list-inline-item"><a href="#" class="text-decoration-none"><i class="fa fa-facebook"></i></a></li>
          <li class="list-inline-item"><a href="#" class="text-decoration-none"><i class="fa fa-twitter"></i></a></li>
          <li class="list-inline-item"><a href="#" class="text-decoration-none"><i class="fa fa-linkedin"></i></a></li>
          <li class="list-inline-item"><a href="#" class="text-decoration-none"><i class="fa fa-youtube"></i></a></li>
        </ul>
      </div>
    </div>
  </footer>
  <!-- prs footer Wrapper End -->
  <!-- st login wrapper Start -->
  <div class="modal fade st_pop_form_wrapper" id="myModal" role="dialog">
    <div class="modal-dialog">
      <div class="modal-content">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <div class="st_pop_form_heading_wrapper float_left">
          <h3>Log in</h3>
        </div>
        <form th:action="@{/user/login}" method="post">
          <div class="st_profile_input float_left">
            <label for="email">Email</label>
            <input type="text" id="email" th:name="username" placeholder="Email" required>
          </div>
          <div class="st_profile__pass_input st_profile__pass_input_pop float_left">
            <label for="password">Password</label>
            <input type="password" id="password" th:name="password" placeholder="Password" required>
          </div>
          <div class="st_form_pop_fp float_left">
            <h3><a href="#" data-toggle="modal" data-target="#myModa2" target="_blank">Forgot Password?</a></h3>
          </div>
          <div class="st_form_pop_login_btn float_left">
            <button type="submit" id="login-button">LOGIN</button>
          </div>
        </form>
        <div class="st_form_pop_or_btn float_left">
          <h4>or</h4>
        </div>
        <div class="st_form_pop_gmail_btn float_left">
          <a href="/oauth2/authorization/google">Connect with Google</a>
        </div>
        <div class="st_form_pop_signin_btn float_left">
          <h4>Don’t have an account? <a href="#" data-toggle="modal" data-target="#myModa3" target="_blank">Sign Up</a></h4>
          <h5>I agree to the <a href="#">Terms & Conditions</a> & <a href="#">Privacy Policy</a></h5>
        </div>
      </div>
    </div>
  </div>
  <div class="modal fade st_pop_form_wrapper" id="myModa2" role="dialog">
    <div class="modal-dialog">
      <div class="modal-content">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <div class="st_pop_form_heading_wrapper st_pop_form_heading_wrapper_fpass float_left">
          <h3>Forgot Password</h3>
          <p>We can help! All you need to do is enter your email ID and follow the instructions!</p>
        </div>
        <div class="st_profile_input float_left">
          <label>Email Address</label>
          <input type="text">
        </div>
        <div class="st_form_pop_fpass_btn float_left">	<a href="#">Verify</a>
        </div>
      </div>
    </div>
  </div>
  <div class="modal fade st_pop_form_wrapper" id="myModa3" role="dialog">
    <div class="modal-dialog">
      <div class="modal-content">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <div class="st_pop_form_heading_wrapper float_left">
          <h3>会員登録</h3>
        </div>
        <div class="st_profile_input float_left form-group">
          <label for="email">Email</label>
          <input type="email" class="form-control" id="emailInput" placeholder="Email Address">
          <span id="emailError" style="color:red; display:none; font-size: 12px;"></span>
        </div>
        <div class="st_form_pop_login_btn float_left">
          <button id="sendMailBtn">
            認証コードを送信
          </button>
        </div>
        <div id="verificationBox" style="display:none;">
          <div class="st_profile_input float_left">
            <label>認証コード</label>
            <input type="text" id="verificationCode" placeholder="認証コードを入力してください">
            <span id="codeError" style="color:red; display:none;">無効な認証コードです。</span>
          </div>
          <div class="st_form_pop_login_btn float_left">
            <button id="verifyCodeBtn" style="background-color: #28a745; color: white; border: none; border-radius: 4px;">
              確認
            </button>
          </div>
        </div>
        <div class="st_form_pop_signin_btn st_form_pop_signin_btn_signup float_left">
          <h5>
            <a href="#">利用規約</a>および<a href="#">プライバシーポリシー</a>に同意します。
          </h5>
        </div>
      </div>
    </div>
  </div>

  <script>
    // 이메일 인증 및 검증 로직
    let validateEmail = (email) => /^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/.test(email);

    // 인증 코드 전송
    $("#sendMailBtn").click(function () {
        let email = $("#emailInput").val();

        if (!validateEmail(email)) {
            $("#emailError").text("無効なメールアドレスです。").show();
            return;
        }

        $("#emailError").hide();

        $.ajax({
            url: "/user/sendcode",
            type: "POST",
            contentType: "application/json",
            data: JSON.stringify({ email: email }),
            success: function () {
                alert("認証コードが送信されました。");
                $("#sendMailBtn").prop("disabled", true);
                $("#verificationBox").show();
            },
            error: function () {
                alert("認証コードの送信に失敗しました。");
            }
        });
    });

    // 인증 코드 확인
    $("#verifyCodeBtn").click(function () {
        let code = $("#verificationCode").val();

        if (!/^[0-9]{6}$/.test(code)) {
            $("#codeError").text("無効な認証コードです。").show();
            return;
        }

        $("#codeError").hide();

        $.ajax({
            url: "/user/verifycode",
            type: "POST",
            contentType: "application/json",
            data: JSON.stringify({
                email: $("#emailInput").val(),
                code: code
            }),
            success: function () {
                alert("認証が完了しました。");
                resetModal();
                window.location.href = "/user/signup";
            },
            error: function () {
                alert("認証コードが間違っています。");
            }
        });
    });

    // 모달이 닫힐 때 상태 초기화
    $("#myModa3").on("hidden.bs.modal", function () {
        resetModal();
    });

    // 모달 상태 초기화 함수
    function resetModal() {
        $("#emailInput").val("");
        $("#emailError").hide();
        $("#verificationCode").val("");
        $("#codeError").hide();
        $("#verificationBox").hide();
        $("#sendMailBtn").prop("disabled", false);
    }
});
  </script>


<!-- Bootstrap 5 JS (CDN) -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
</div>